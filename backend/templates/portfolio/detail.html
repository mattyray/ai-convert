{% extends "base.html" %}
{% load static %}

{% block title %}{{ project.title }} – Portfolio{% endblock %}

{% block content %}
<div class="container my-5">

  <!-- Back Link -->
  <a href="{% url 'portfolio:index' %}" class="btn btn-outline-dark">← Back to Portfolio</a>

  <!-- HERO HEADER -->
  <div class="text-center case-section fade-in-up mb-4">
    <h1 class="fw-bold">{{ project.title }}</h1>
    <p class="lead text-muted">{{ project.description }}</p>
    <div class="mt-3">
      {% if project.github_url %}
        <a href="{{ project.github_url }}" class="btn btn-dark me-2" target="_blank">💻 GitHub</a>
      {% endif %}
      {% if project.live_url %}
        <a href="{{ project.live_url }}" class="btn btn-primary" target="_blank">🌍 Live Site</a>
      {% endif %}
    </div>
  </div>

  <!-- HERO IMAGE -->
  {% if project.hero_image %}
  <div class="text-center mb-5 case-section fade-in-up">
    <img src="{% static project.hero_image %}" class="img-fluid rounded shadow-sm" alt="{{ project.title }}" style="max-height: 400px; object-fit: cover; width: 100%; max-width: 960px;">
  </div>
  {% endif %}

  <!-- OVERVIEW -->
  {% if project.overview %}
  <div class="card mb-4 shadow-sm case-section fade-in-up">
    <div class="card-body">
      <h3 class="card-title">📌 Overview</h3>
      <p class="card-text">{{ project.overview }}</p>
    </div>
  </div>
  {% endif %}

  <!-- PROBLEM & SOLUTION -->
  <div class="row mb-4 case-section fade-in-up">
    {% if project.problem %}
    <div class="col-md-6 mb-3 mb-md-0">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h4 class="card-title">🧩 The Problem</h4>
          <p>{{ project.problem }}</p>
        </div>
      </div>
    </div>
    {% endif %}
    {% if project.solution %}
    <div class="col-md-6">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h4 class="card-title">💡 The Solution</h4>
          <p>{{ project.solution }}</p>
        </div>
      </div>
    </div>
    {% endif %}
  </div>

  <!-- TECH STACK -->
  {% if project.tech_stack %}
  <div class="card mb-4 shadow-sm case-section fade-in-up">
    <div class="card-body">
      <h3 class="card-title">🛠️ Tech Stack</h3>
      <div class="row">
        {% for category, tools in project.tech_stack.items %}
        <div class="col-md-6 mb-3">
          <strong class="text-muted">{{ category|title }}:</strong>
          <div class="mt-2">
            {% for tool in tools %}
              <span class="tech-pill">
                {% if tool == "Django" %}<i class="fab fa-python me-1"></i>{% endif %}
                {% if tool == "Python" %}<i class="fas fa-code me-1"></i>{% endif %}
                {% if tool == "PostgreSQL" %}<i class="fas fa-database me-1"></i>{% endif %}
                {% if tool == "Docker" %}<i class="fab fa-docker me-1"></i>{% endif %}
                {% if tool == "Bootstrap 5" %}<i class="fab fa-bootstrap me-1"></i>{% endif %}
                {% if tool == "Heroku" %}<i class="fas fa-cloud-upload-alt me-1"></i>{% endif %}
                {{ tool }}
              </span>
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
  {% endif %}

  <!-- SPECIAL FEATURES -->
  {% if project.special_features %}
  <div class="card mb-4 shadow-sm case-section fade-in-up">
    <div class="card-body">
      <h3 class="card-title">✨ Special Features</h3>
      <ul class="mb-0">
        {% for feature in project.special_features %}
        <li>🌟 {{ feature }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  <!-- PROBLEMS SOLVED -->
  {% if project.problems_solved %}
  <div class="card mb-4 shadow-sm case-section fade-in-up">
    <div class="card-body">
      <h3 class="card-title">🎯 Real-World Problems Solved</h3>
      <ul class="mb-0">
        {% for item in project.problems_solved %}
        <li>🔧 {{ item }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  <!-- IMPROVEMENTS -->
  {% if project.improvements %}
  <div class="card mb-4 shadow-sm case-section fade-in-up">
    <div class="card-body">
      <h3 class="card-title">🚧 Improvements for Next Time</h3>
      <ul class="mb-0">
        {% for item in project.improvements %}
        <li>🛠 {{ item }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  <!-- PROUD OF -->
  {% if project.proud_of %}
  <div class="card mb-4 shadow-sm case-section fade-in-up">
    <div class="card-body">
      <h3 class="card-title">🏅 What I'm Proud Of</h3>
      <ul class="mb-0">
        {% for item in project.proud_of %}
        <li>🌈 {{ item }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  <!-- BUILD NOTES -->
  {% if project.build_notes %}
  <div class="card mb-4 shadow-sm case-section fade-in-up">
    <div class="card-body">
      <h3 class="card-title">📚 Build Notes</h3>
      <div class="highlight">{{ project.build_notes|safe }}</div>
    </div>
  </div>
  {% endif %}

  <!-- Bottom CTAs -->
  <div class="text-center case-section fade-in-up mt-5">
    {% if project.live_url %}
      <a href="{{ project.live_url }}" class="btn btn-primary btn-lg me-2" target="_blank">🌍 Visit Live Site</a>
    {% endif %}
    {% if project.github_url %}
      <a href="{{ project.github_url }}" class="btn btn-outline-dark btn-lg" target="_blank">💻 GitHub Repo</a>
    {% endif %}
  </div>

</div>
{% endblock %}
